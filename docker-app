FROM python:3.6

WORKDIR ./app
RUN apt-get update && apt-get install -y \
	libsasl2-dev \
	libldap2-dev \
	libssl-dev

RUN pip install flask==1.1.4
RUN pip install flask-SQLAlchemy==2.5.1
RUN pip install mysql-connector-python==8.0.27
RUN pip install flask-appbuilder==3.3.4
RUN pip install python-ldap==3.3.1
RUN pip install werkzeug==0.16.1
RUN pip install pulp==2.5.1
RUN pip install amply==0.1.4
RUN pip install pyopenssl==21.0.0
RUN pip install requests==2.26.0
RUN pip install ldap3==2.9.1

COPY app/ ./
COPY app/custom/manager.py /usr/local/lib/python3.6/site-packages/flask_appbuilder/security/
ENV FLASK_APP=app/__init__.py
ENV FLASK_DEBUG=True
CMD flask run --host=0.0.0.0 --port=5000 --cert=cert.pem --key=key.pem
